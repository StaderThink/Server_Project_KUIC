@inject HttpClient http
@inject NavigationManager navegador

@page "/categoria/registrar"
@layout AppLayout

<h3>Registrar nueva categoria</h3>

<form @onsubmit="Enviar">
    <div class="field">
        <label for="nombre">Nombre</label>
        <input id="nombre" class="input" type="text" @bind="categoria.Nombre" required />
    </div>

    <div class="field">
        <label for="descripcion">Descripción</label>
        <textarea id="descripcion" class="input" type="text" @bind="categoria.Descripcion"></textarea>
        <small>Opcional</small>
    </div>

    <div class="control is-grouped">
        <button type="submit" class="is-primary">Registrar</button>
        <a href="/categoria" class="button is-outlined">Cancelar</a>
    </div>
</form>

@code {
    Categoria categoria { get; set; } = new Categoria();

    async Task Enviar()
    {
        HttpResponseMessage respuesta = await http.PostAsJsonAsync("/api/categoria", categoria);

        if (respuesta.IsSuccessStatusCode)
        {
            navegador.NavigateTo("/categoria");
        }
    }
}
